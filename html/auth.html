<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login / Signup</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../css/auth.css" /> <!-- <- Your custom CSS -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
  <script type="module" src="../js/auth.js" defer></script>
  <script src="../js/script.js"></script>
  <!-- PWA Manifest & Theme -->
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="#2E7D32">

</head>
<body class="bg-black">
  <section class="min-h-screen flex items-stretch text-white">
    <!-- Left: Video/Brand (hidden on mobile) -->
    <div class="lg:flex w-1/2 hidden relative items-center overflow-hidden">
      <!-- VIDEO -->
      <video id="bgVideo" autoplay muted playsinline
        class="absolute inset-0 w-full h-full object-cover video-blur z-0">
        <source src="../media/video.mp4" type="video/mp4" />
        Your browser does not support the video tag.
      </video>
      <!-- FADE overlay: dissolves only the video -->
      <div id="fadeOverlay" class="fade-overlay absolute inset-0 bg-black"></div>
      <!-- Black overlay for more contrast (on top of fade and video, but under text) -->
      <div class="absolute inset-0 bg-black opacity-40 z-20"></div>
      <!-- TEXT ON TOP! -->
      <div class="w-full px-16 z-30 relative">
        <h1 class="text-5xl font-bold text-left tracking-wide">Explore the trails</h1>
        <p class="text-2xl my-4">With exciting people...</p>
      </div>
    
    </div>

    <!-- Right: Auth Form -->
    <div class="lg:w-1/2 w-full flex items-center justify-center text-center px-2" style="background-color: #161616;">
      <div class="relative w-full max-w-md mx-auto py-8 z-20">
        <!-- Logo Row Centered -->
        <div class="flex flex-col items-center mb-10">
          <div class="flex items-center justify-center space-x-3">
            <img src="../Image/logo-blue.png" alt="Trail Quest Logo" class="h-10 w-10 object-contain"/>
            <span class="text-xl font-semibold text-white">Trail Quest</span>
          </div>
        </div>
        
        <!-- Login Form -->
        <form id="loginForm" class="w-full mx-auto space-y-4">
          <input type="email" id="loginEmail" placeholder="Email" required
                 class="block w-full p-4 text-lg rounded-sm bg-black text-white border-none focus:outline-none" />
          <input type="password" id="loginPassword" placeholder="Password" required
                 class="block w-full p-4 text-lg rounded-sm bg-black text-white border-none focus:outline-none" />
          <div class="flex justify-end text-gray-400 hover:underline">
            <a href="#" class="text-xs">Forgot your password?</a>
          </div>
          <button type="button" onclick="loginUser()"
                   class="uppercase w-full p-4 text-lg rounded-full bg-green-500 hover:bg-green-700 transition">Sign in</button>
          <div class="mt-4 text-sm text-gray-300">
            Don't have an account?
            <a href="#" onclick="toggleForms('signup')" class="text-white-400 hover:underline">Sign Up</a>
          </div>
        </form>

        

        <!-- Signup Form (hidden by default, show when toggled) -->
        <form id="signupForm" class="w-full mx-auto space-y-4 hidden">
          <input type="text" id="signupFullName" placeholder="Full Name" required
                 class="block w-full p-4 text-lg rounded-sm bg-black text-white border-none focus:outline-none" />
          <input type="email" id="signupEmail" placeholder="Email" required
                 class="block w-full p-4 text-lg rounded-sm bg-black text-white border-none focus:outline-none" />
          <input type="password" id="signupPassword" placeholder="Password" required
                 class="block w-full p-4 text-lg rounded-sm bg-black text-white border-none focus:outline-none" />
          <input type="tel" id="signupPhone" placeholder="Mobile Number" required
                 class="block w-full p-4 text-lg rounded-sm bg-black text-white border-none focus:outline-none" />
          <select id="signupUserType" class="block w-full p-4 text-lg rounded-sm bg-black text-white border-none focus:outline-none">
            <option value="hiker">Hiker</option>
            <option value="organizer">Organizer</option>
          </select>
          <button type="button" onclick="registerUser()"
                  class="uppercase w-full p-4 text-lg rounded-full bg-indigo-500 hover:bg-indigo-600 transition">Register</button>
          <div class="mt-4 text-sm text-gray-300">
            Have an account?
            <a href="#" onclick="toggleForms('login')" class="text-indigo-400 hover:underline">Login</a>
          </div>
        </form>
        
        <!-- Logout Button -->
        <button id="logoutBtn" style="display:none;"
                class="mt-8 block w-full p-4 rounded-full bg-gray-700 text-white text-lg hover:bg-gray-800 transition"
                onclick="logoutUser()">Logout</button>
      </div>
    </div>
    
  </section>

  <script>
    // Toggle login/signup forms (show/hide)
    function toggleForms(form) {
      document.getElementById('loginForm').classList.toggle('hidden', form === 'signup');
      document.getElementById('signupForm').classList.toggle('hidden', form !== 'signup');
    }
    // Only video dissolves, not text!
    document.addEventListener('DOMContentLoaded', function() {
      const video = document.getElementById('bgVideo');
      const fadeOverlay = document.getElementById('fadeOverlay');
      if (video && fadeOverlay) {
        video.addEventListener('ended', function() {
          fadeOverlay.classList.add('active');
          setTimeout(() => {
            // Restart video and hide fade for seamless looping
            video.currentTime = 0;
            video.play();
            fadeOverlay.classList.remove('active');
          }, 1000); // match CSS transition duration
        });
      }
    });
    // Dummy login/register/logout functions for local use, remove if using Firebase
    window.loginUser = window.loginUser || function(){};
    window.registerUser = window.registerUser || function(){};
    window.logoutUser = window.logoutUser || function(){};
  </script>
</body>
</html>
